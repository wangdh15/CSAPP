## Shell Lab

这个实验主要是练习信号编程的部分。涉及到各种信号处理函数，以及进程间同步等。

系统的整个设计如下：
1. 如果是内建命令，则直接执行。
2. 如果不是，则创建一个新的进程，execve来执行对应的内容。然后将其放到job的队列中。
3. 如果是后台任务，则不做处理，直接等待下一个输入。如果不是后台任务，则需要等待当前的子进程返回才行。
4. 等待实现的逻辑是，不断的轮训所有的job，只到当前的pid不是fg的pid即可。对job的修改放到chld的信号处理函数中执行。
5. 在chld的信号处理函数中，不断调用waitpid，然后判断状态来执行对应的操作，输出对应的信息即可。
6. 在其他的信号处理函数中，只需要获得对应的PID，然后向它发送信号即可。后续的操作放到CHLD的处理函数中进行执行。

### 注意

在主进程和信号处理函数中对共享变量的读写都需要保护起来。比如errno，jobs等。
解决方法是在处理开始通过sigprocmask函数来将信号屏蔽，相当于关掉了中断。
